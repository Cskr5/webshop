<div class="containerX" fxLayoutAlign="center">
  <mat-card class="mat-elevation-z8" fxLayout="row wrap" fxLayoutGap="10px"
            fxFlex.lt-md="100" fxFlex.gt-md="70" fxFlex.md="70" fxLayoutAlign="space-between" [ngClass]="{'loading': loading}">

    <form name="form" [formGroup]="productForm" (ngSubmit)="onSubmit()" fxFlex="100" fxLayout="column">

      <mat-card-header class="mt-15">
        <mat-icon mat-card-avatar>add</mat-icon>
        <mat-card-title>Új termék létrehozása</mat-card-title>
      </mat-card-header>

      <div fxFlex="100" fxLayout="column">
        <mat-form-field fxFlex="100" appearance="outline">
          <mat-label>Termék megnevezése</mat-label>
          <input matInput placeholder="" formControlName="name">
          <mat-icon matSuffix>title</mat-icon>
          <mat-hint align="end">Max. karakterek: {{ productForm.get('name').value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="productForm.get('name').invalid">Min. 3, Max. 200 karakter hosszú!</mat-error>
          <mat-error *ngIf="productForm.get('name').errors?.serverError">
            {{ productForm.get('name').errors?.serverError }}
          </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayout="column">
        <mat-form-field fxFlex="100" appearance="outline">
          <mat-label>Termék azonosító</mat-label>
          <input matInput placeholder="" formControlName="productCode">
          <mat-icon matSuffix></mat-icon>
          <mat-hint>Pl.: GMI12345</mat-hint>
          <mat-error *ngIf="productForm.get('productCode').invalid">Min. 3, Max. 30 karakter hosszú!</mat-error>
          <mat-error *ngIf="productForm.get('productCode').errors?.serverError">
            {{ productForm.get('productCode').errors?.serverError }}
          </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayout="column">
        <mat-form-field appearance="outline">
          <mat-label>Kategória</mat-label>
          <mat-select formControlName="category" required>
            <mat-option>--</mat-option>
            <mat-option *ngFor="let category of categories | keyvalue" [value]="category.key">
              {{ category.value }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="productForm.get('category').hasError('required')">Kategória szükséges!</mat-error>
          <mat-error *ngIf="productForm.get('category').errors?.serverError">
            {{ productForm.get('category').errors?.serverError}}
          </mat-error>
          <mat-hint></mat-hint>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayout="column">
        <mat-form-field fxFlex="100" appearance="outline">
          <mat-label>Termék leírása</mat-label>
          <textarea matTextareaAutosize [matAutosizeMaxRows]="18" rows="8" matInput placeholder=""
                    formControlName="description"></textarea>
          <mat-error *ngIf="productForm.get('description').invalid">Minimum 10 karakter!</mat-error>
          <mat-error *ngIf="productForm.get('description').errors?.serverError">
            {{ productForm.get('description').errors?.serverError }}
          </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="100" fxLayout="row wrap" fxLayoutAlign="space-between">

        <mat-form-field fxFlex="45" fxFlex.lt-sm="100" appearance="outline">
          <mat-label>Ár</mat-label>
          <input type="number" matInput placeholder="" formControlName="price">
          <mat-icon matSuffix>euro</mat-icon>
          <mat-error *ngIf="productForm.get('price').invalid">Pozitív ár szükséges!</mat-error>
          <mat-error *ngIf="productForm.get('price').errors?.serverError">
            {{ productForm.get('price').errors?.serverError }}
          </mat-error>
        </mat-form-field>

        <mat-form-field fxFlex="45" fxFlex.lt-sm="100" appearance="outline">
          <mat-label>Kedvezmény</mat-label>
          <input type="number" matInput placeholder="" formControlName="discount">
          <mat-icon matSuffix>local_offer</mat-icon>
          <mat-hint>Kedvezmény (0 - 100%)</mat-hint>
          <mat-error *ngIf="productForm.get('discount').invalid">Min. 0, Max. 100!</mat-error>
          <mat-error *ngIf="productForm.get('discount').errors?.serverError">
            {{ productForm.get('discount').errors?.serverError }}
          </mat-error>
        </mat-form-field>

      </div>

      <div fxFlex="100" fxLayout="row wrap" fxLayoutAlign="space-between">

        <mat-form-field fxFlex="45" fxFlex.lt-sm="100" appearance="outline">
          <mat-label>Garancia</mat-label>
          <input type="number" matInput placeholder="" formControlName="warrantyMonths">
          <mat-icon matSuffix>calendar_today</mat-icon>
          <mat-error *ngIf="productForm.get('warrantyMonths').invalid">Min. 0, Max. 360 hónap!</mat-error>
          <mat-error *ngIf="productForm.get('warrantyMonths').errors?.serverError">
            {{ productForm.get('warrantyMonths').errors?.serverError }}
          </mat-error>
        </mat-form-field>

        <mat-form-field fxFlex="45" fxFlex.lt-sm="100" appearance="outline">
          <mat-label>Mennyiség</mat-label>
          <input min="0" type="number" matInput placeholder="" formControlName="quantityAvailable">
          <mat-icon matSuffix>filter_9_plus</mat-icon>
          <mat-error *ngIf="productForm.get('quantityAvailable').invalid">Minimum 0!</mat-error>
          <mat-error *ngIf="productForm.get('quantityAvailable').errors?.serverError">
            {{ productForm.get('quantityAvailable').errors?.serverError }}
          </mat-error>
        </mat-form-field>

      </div>

      <div fxFlex="100">

          <input type="image">

      </div>

<!--      <div class="form-group">-->
<!--        <label for="pictureUrl"></label>-->
<!--        <input style="display:none" multiple accept="image/*" formControlName="pictureUrl"-->
<!--               id="pictureUrl" type="file" (change)="onFileChange($event)" #imageInput>-->
<!--        <button type="button" class="btn btn-outline-primary" (click)="imageInput.click()">Képek kiválasztása-->
<!--        </button>-->
<!--        <small id="pictureUrlHelper" class="form-text text-muted">-->
<!--          Kép feltöltése szükséges. Max. 1MB / kép</small>-->
<!--      </div>-->
<!--      <div class="row">-->
<!--        <div class="col-12">-->
<!--          <ul class="preview-thumbnail nav nav-tabs">-->
<!--            <li class="active" *ngFor="let picture of uploadedPictures">-->
<!--              <a class="preview-image"><img src="{{picture}}" alt="pic" width="100" height="100"-->
<!--                                            (click)="removeImage(picture)"/></a>-->
<!--            </li>-->
<!--          </ul>-->
<!--        </div>-->
<!--      </div>-->

      <div fxFlex="100" class="mt-15" fxLayout="column">
          <mat-checkbox color="primary" formControlName="active">Termék azonnal rendelhető</mat-checkbox>
      </div>

      <mat-card-actions class="mt-15" fxFlex="100" fxLayoutAlign="center">
        <button mat-flat-button color="primary" [disabled]="loading" type="submit">
          <mat-icon>create</mat-icon> Küldés
        </button>

        <a mat-flat-button color="primary" [style.margin-left]="'10px'" [disabled]="loading">
          <mat-icon>arrow_back</mat-icon> Vissza
        </a>
      </mat-card-actions>
    </form>
  </mat-card>
</div>
