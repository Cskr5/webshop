<div class="containerX" fxLayoutAlign="center">
  <div fxLayout="row wrap" fxFlex.lt-lg="100" fxFlex.lg="80" fxLayoutAlign="center">

    <mat-card class="product-card" materialElevation *ngFor="let product of products" [style.margin-top]="'1%'">
      <div fxFlexFill fxLayoutAlign="center" fxLayout="column">
        <a [routerLink]="['/product/', product.slug]">
          <img class="product-card-image" mat-card-image [src]="product.pictureUrl" alt="{{ product.name }} image"
               [style.margin-top]="'5px'">
        </a>
        <span class="spacer"></span>
        <mat-card-title>{{ product.name | slice: 0: 20 }}</mat-card-title>
        <mat-card-subtitle></mat-card-subtitle>

        <mat-card-content>
          <p> {{ product.description | slice: 0: 100 }}...</p>
        </mat-card-content>
        <mat-card-header *ngIf="product.discount">
          <mat-card-title>
            <p style="color: red"><small>
              {{ calculateDiscountedPrice(product) | currency : 'HUF' : 'symbol-narrow' : '3.0-0' }}
            </small></p>
          </mat-card-title>
          <mat-card-subtitle>
            <del>{{ product.price  | currency : 'HUF' : 'symbol-narrow' : '3.0'  }}</del>
            ( {{ product.discount }}% )
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-title *ngIf="!product.discount">
          <p><small>
            {{ product.price  | currency : 'HUF' : 'symbol-narrow' : '3.0'  }}
          </small></p>
        </mat-card-title>
        <mat-card-subtitle [style]="'color: red'" *ngIf="product.quantityAvailable <= 0">Nincs rakt√°ron
        </mat-card-subtitle>
        <mat-card-actions fxLayoutAlign="end end" fxLayout="row">

          <button mat-icon-button *ngIf="product.quantityAvailable > 0" (click)="addToCart(product.id)"
                  [color]="'primary'">
            <mat-icon>add_shopping_cart</mat-icon>
          </button>

          <button mat-icon-button [color]="'primary'">
            <mat-icon>favorite</mat-icon>
          </button>
        </mat-card-actions>

      </div>
    </mat-card>
  </div>
</div>

